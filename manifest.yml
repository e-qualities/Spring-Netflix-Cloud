---
applications:
##
## The Eureka Service Registry 
##
- name: ((unique-prefix))-eureka-server
  memory: 1024M
  disk_quota: 512M
  instances: 1
  buildpacks:
    - java_buildpack
  path: ./eureka.service/target/eureka.service-0.0.1-SNAPSHOT.jar
  
  routes: 
  - route: ((eureka-server-route)) 

##
## Address Service
##
- name: ((unique-prefix))-address-service
  memory: 1024M
  disk_quota: 512M
  instances: 1
  buildpacks:
    - java_buildpack
  path: ./address.service/target/address.service-0.0.1-SNAPSHOT.jar
  
  routes: 
  - route: ((unique-prefix))-address-service.((cf-domain))
  
  env:
    spring.profiles.active: cloud # activate the spring profile named 'cloud'.
    eureka-server-url: https://((eureka-server-route)) # referenced from application.yml 

##
## Address Service Client
##
- name: ((unique-prefix))-address-service-client
  memory: 1024M
  disk_quota: 512M
  instances: 1
  buildpacks:
    - java_buildpack
  path: ./address.service.client/target/address.service.client-0.0.1-SNAPSHOT.jar
  
  routes: 
  - route: ((unique-prefix))-address-service-client.((cf-domain))
  
  env:
    spring.profiles.active: cloud # activate the spring profile named 'cloud'.
    eureka-server-url: https://((eureka-server-route)) # referenced from application.yml 

##
## Employee Service
##
- name: ((unique-prefix))-employee-service
  memory: 1024M
  disk_quota: 512M
  instances: 1
  buildpacks:
    - java_buildpack
  path: ./employee.service/target/employee.service-0.0.1-SNAPSHOT.jar
  
  routes: 
  - route: ((unique-prefix))-employee-service.((cf-domain))
  
  env:
    spring.profiles.active: cloud # activate the spring profile named 'cloud'.
    eureka-server-url: https://((eureka-server-route)) # referenced from application.yml 

##
## Employee Service Client
##
- name: ((unique-prefix))-employee-service-client
  memory: 1024M
  disk_quota: 512M
  instances: 1
  buildpacks:
    - java_buildpack
  path: ./employee.service.client/target/employee.service.client-0.0.1-SNAPSHOT.jar
  
  routes: 
  - route: ((unique-prefix))-employee-service-client.((cf-domain))
  
  env:
    spring.profiles.active: cloud # activate the spring profile named 'cloud'.
    eureka-server-url: https://((eureka-server-route)) # referenced from application.yml 

##
## Zuul Service
##
- name: ((unique-prefix))-zuul-service
  memory: 1024M
  disk_quota: 512M
  instances: 1
  buildpacks:
    - java_buildpack
  path: ./zuul.service/target/zuul.service-0.0.1-SNAPSHOT.jar
  
  routes: 
  - route: ((unique-prefix))-zuul-service.((cf-domain))
  
  env:
    spring.profiles.active: cloud # activate the spring profile named 'cloud'.
    eureka-server-url: https://((eureka-server-route)) # referenced from application.yml 
    
##
## Hystrix Dashboard
##
- name: ((unique-prefix))-hystrix-dashboard
  memory: 1024M
  disk_quota: 512M
  instances: 1
  buildpacks: 
  - java_buildpack
  path: ./hystrix-dashboard/target/hystrix-dashboard-0.0.1-SNAPSHOT.jar
  
  routes: 
  - route: ((unique-prefix))-hystrix-dashboard.((cf-domain))

##
## Turbine - Hystrix stream aggregator for dashboard
##
- name: ((unique-prefix))-turbine
  memory: 1024M
  disk_quota: 512M
  instances: 1
  buildpacks:
  - java_buildpack
  path: ./turbine/target/turbine-0.0.1-SNAPSHOT.jar
  
  routes: 
  - route: ((unique-prefix))-turbine.((cf-domain))
  
  env:
    spring.profiles.active: cloud # activate the spring profile named 'cloud'.
    eureka-server-url: https://((eureka-server-route)) # referenced from application.yml 

##
## Diagnostics Service - allows retrieving Eureka InstanceInfo as JSON for particular service.
##
- name: ((unique-prefix))-diagnostics-service
  memory: 1024M
  disk_quota: 512M
  instances: 1
  buildpacks:
  - java_buildpack
  path: ./diagnostics.service/target/diagnostics.service-0.0.1-SNAPSHOT.jar
  
  routes: 
  - route: ((unique-prefix))-diagnostics-service.((cf-domain))
  
  env:
    spring.profiles.active: cloud # activate the spring profile named 'cloud'.
    eureka-server-url: https://((eureka-server-route)) # referenced from application.yml